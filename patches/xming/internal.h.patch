--- ./hw/xwin/winclipboard/save_internal.h	2020-04-08 13:01:17.378341269 +0100
+++ ./hw/xwin/winclipboard/internal.h	2020-04-15 20:35:37.273108148 +0100
@@ -1,3 +1,4 @@
+
 /*
  *Copyright (C) 2003-2004 Harold L Hunt II All Rights Reserved.
  *
@@ -35,15 +36,14 @@
 #include <X11/Xfuncproto.h> // for _X_ATTRIBUTE_PRINTF
 #include <X11/Xmd.h> // for BOOL
 
-/* Windows headers */
-#include <X11/Xwindows.h>
+#include <X11/Xlib-xcb.h>
 
 #define WIN_XEVENTS_SUCCESS			0  // more like 'CONTINUE'
 #define WIN_XEVENTS_FAILED			1
 #define WIN_XEVENTS_NOTIFY_DATA			3
 #define WIN_XEVENTS_NOTIFY_TARGETS		4
 
-#define WM_WM_QUIT                             (WM_USER + 2)
+#define WM_WM_QUIT                             (WM_USER + 201)
 
 #define ARRAY_SIZE(a)  (sizeof((a)) / sizeof((a)[0]))
 
@@ -78,6 +78,13 @@
     xcb_atom_t atomIncr;
 } ClipboardAtoms;
 
+/* Modern clipboard API functions */
+typedef wBOOL WINAPI (*ADDCLIPBOARDFORMATLISTENERPROC)(HWND hwnd);
+typedef wBOOL WINAPI (*REMOVECLIPBOARDFORMATLISTENERPROC)(HWND hwnd);
+
+extern ADDCLIPBOARDFORMATLISTENERPROC g_fpAddClipboardFormatListener;
+extern REMOVECLIPBOARDFORMATLISTENERPROC g_fpRemoveClipboardFormatListener;
+
 /*
  * winclipboardwndproc.c
  */
